<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRS Overview - All You Need Is A Fuzzing Brain</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .docs-container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            padding-top: 120px;
            gap: 2rem;
        }
        .docs-sidebar {
            width: 280px;
            flex-shrink: 0;
            position: sticky;
            top: 100px;
            height: fit-content;
        }
        .docs-sidebar h3 {
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary, #888);
            margin-bottom: 1rem;
        }
        .docs-sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .docs-sidebar li {
            margin-bottom: 0.5rem;
        }
        .docs-sidebar a {
            display: block;
            padding: 0.5rem 1rem;
            color: var(--text-primary, #fff);
            text-decoration: none;
            border-radius: 6px;
            transition: background-color 0.2s;
        }
        .docs-sidebar a:hover {
            background-color: var(--bg-secondary, #1a1a2e);
        }
        .docs-sidebar a.active {
            background-color: var(--accent-color, #6366f1);
            color: #fff;
        }
        .docs-content {
            flex: 1;
            min-width: 0;
        }
        .docs-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .docs-content h2 {
            font-size: 1.75rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color, #333);
        }
        .docs-content h3 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .docs-content p {
            line-height: 1.7;
            margin-bottom: 1rem;
        }
        .docs-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 1.5rem 0;
        }
        .docs-content pre {
            background-color: var(--bg-secondary, #1a1a2e);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
        }
        .docs-content code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
        }
        .docs-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .docs-content th, .docs-content td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid var(--border-color, #333);
        }
        .docs-content th {
            background-color: var(--bg-secondary, #1a1a2e);
        }
        .docs-toc {
            background-color: var(--bg-secondary, #1a1a2e);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }
        .docs-toc h4 {
            margin-top: 0;
            margin-bottom: 1rem;
        }
        .docs-toc ul {
            margin: 0;
            padding-left: 1.5rem;
        }
        .docs-toc li {
            margin-bottom: 0.5rem;
        }
        .docs-toc a {
            color: var(--accent-color, #6366f1);
            text-decoration: none;
        }
        .docs-toc a:hover {
            text-decoration: underline;
        }
        .docs-intro {
            font-size: 1.1rem;
            color: var(--text-secondary, #aaa);
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: var(--bg-secondary, #1a1a2e);
            border-left: 4px solid var(--accent-color, #6366f1);
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html" style="text-decoration: none; display: flex; align-items: center; gap: var(--spacing-sm);">
                        <img src="assets/images/fuzzbrain.jpg" alt="FuzzingBrain Logo" class="brain-logo">
                        <h1>All You Need Is A Fuzzing Brain</h1>
                    </a>
                </div>
                <nav class="nav">
                    <a href="index.html#about">About</a>
                    <a href="documentation.html" class="nav-active">Documentation</a>
                    <a href="quickstart.html">Quickstart</a>
                    <a href="blog.html">Blog</a>
                    <a href="index.html#research">Research</a>
                    <a href="index.html#results">Results</a>
                    <a href="index.html#team">Team</a>
                    <a href="index.html#code">Open Source</a>
                </nav>
            </div>
        </header>

        <!-- Docs Layout -->
        <div class="docs-container">
            <!-- Sidebar -->
            <aside class="docs-sidebar">
                <h3>Documentation</h3>
                <ul>
                    <li><a href="documentation.html" class="active">CRS Overview</a></li>
                    <li><a href="docs/strategy_overview.html">Strategy Overview</a></li>
                    <li><a href="docs/pov_strategies.html">POV Strategies</a></li>
                    <li><a href="docs/patch_strategies.html">Patch Strategies</a></li>
                    <li><a href="docs/sarif_processing.html">SARIF Processing</a></li>
                    <li><a href="docs/task_processing.html">Task Processing</a></li>
                    <li><a href="docs/x_strategies.html">X Strategies</a></li>
                </ul>
            </aside>

            <!-- Content -->
            <main class="docs-content">
                <h1>CRS Overview</h1>
                <p><em>Made By Team All_you_need_is_a_fuzzing_brain</em></p>

                <div class="docs-intro">
                    This Cyber Reasoning System (CRS) is an AI-driven automated vulnerability detection and remediation framework built upon the OSS-Fuzz infrastructure. Developed by the team "all_you_need_is_a_fuzzing_brain" for the 2025 DARPA AIxCC (Artificial Intelligence Cyber Challenge) finals, CRS represents a state-of-the-art approach to automated software security analysis.
                </div>

                <!-- Table of Contents -->
                <div class="docs-toc">
                    <h4>Documentation</h4>
                    <ul>
                        <li><a href="docs/strategy_overview.html">Strategy Overview</a> - Framework and model configurations</li>
                        <li><a href="docs/pov_strategies.html">POV Strategies</a> - Proof-of-Vulnerability generation techniques</li>
                        <li><a href="docs/patch_strategies.html">Patch Strategies</a> - Vulnerability remediation approaches</li>
                        <li><a href="docs/sarif_processing.html">SARIF Processing</a> - Static analysis integration</li>
                        <li><a href="docs/task_processing.html">Task Processing</a> - Task distribution and execution</li>
                        <li><a href="docs/x_strategies.html">X Strategies</a> - Fallback patching approaches</li>
                    </ul>
                </div>

                <h2>CRS Configuration Parameters</h2>
                <p>This CRS detection is based on vulnerabilities from the OSS-Fuzz project. The following are the CRS configuration parameters:</p>

                <table>
                    <tr><th>Parameter</th><th>Value</th></tr>
                    <tr><td><strong>Version</strong></td><td>1.2.0</td></tr>
                    <tr><td><strong>Supported Languages</strong></td><td>C/C++, Java</td></tr>
                    <tr><td><strong>Fuzzer Engine</strong></td><td>libfuzzer</td></tr>
                    <tr><td><strong>Architecture</strong></td><td>x86_64</td></tr>
                </table>

                <h2>CRS Overview</h2>
                <img src="docs/images/CRS_Framework.png" alt="CRS Framework">

                <p>The CRS architecture comprises four distinct services that work in concert to deliver comprehensive vulnerability detection and remediation capabilities: Task Service, Worker Service, Submission Service, and Static Analysis Service. The system leverages artificial intelligence techniques combined with fuzzing methodologies to provide end-to-end vulnerability management capabilities.</p>

                <p>CRS is designed to handle three primary task categories:</p>
                <ul>
                    <li><strong>Delta Scan Task</strong>: Attempts to identify whether a specific commit introduces vulnerabilities that can be triggered by existing fuzzers, subsequently generating appropriate remediation solutions.</li>
                    <li><strong>Full Scan Task</strong>: Conducts comprehensive analysis of entire source code repositories to identify vulnerabilities exploitable by known fuzzers, providing corresponding patches.</li>
                    <li><strong>SARIF Analysis Task</strong>: Validates vulnerabilities based on SARIF (Static Analysis Results Interchange Format) reports, verifying their existence and generating remediation patches when confirmed.</li>
                </ul>

                <h3>Task Service</h3>
                <p>The Task Service functions as the orchestration layer, responsible for parsing and processing incoming tasks while acquiring target repositories and fuzzing toolchains. This service constructs appropriate fuzzers and sanitizers based on project specifications, formatting tasks for downstream processing.</p>

                <h3>Worker Service</h3>
                <p>The Worker Service represents the core computational engine of CRS, handling task execution based on assigned workspaces, fuzzers, and sanitizers. This service implements the primary vulnerability localization and patching logic through parallel invocation of various LLM-based vulnerability detection and reproduction strategies.</p>

                <h3>Submission Service</h3>
                <p>The Submission Service is specifically designed for competition submission management, handling the organization and deduplication of discovered proofs-of-vulnerability (POV) and patches.</p>

                <h3>Static Analysis Service</h3>
                <p>The Static Analysis Service provides essential static analysis capabilities that support various CRS strategies. It implements comprehensive functionality including call graph generation and extraction of software context metadata.</p>

                <h2>Case Study: libpng</h2>
                <img src="docs/images/workflow.png" alt="CRS Workflow">

                <p>This section demonstrates CRS functionality through a practical example involving the identification and remediation of a dynamic stack buffer overflow vulnerability in the libpng project.</p>

                <p><strong>Project</strong>: libpng</p>
                <p><strong>Vulnerability Type</strong>: Dynamic Stack Buffer Overflow</p>
                <p><strong>Root Cause</strong>: An improper use of <code>sizeof</code> operator leading to out-of-bounds read and write operations in the <code>png_handle_iCCP</code> function.</p>

                <p><strong>Expected Sanitizer Report:</strong></p>
<pre><code>=================================================================
==18==ERROR: AddressSanitizer: dynamic-stack-buffer-overflow on address 0x7ffe7e032b52 at pc 0x563915a23a9b bp 0x7ffe7e032ad0 sp 0x7ffe7e032ac8
READ of size 2 at 0x7ffe7e032b52 thread T0
....</code></pre>

                <p>This stack trace indicates a 2-byte read operation occurring at an invalid memory address within the <code>png_handle_iCCP</code> function, specifically at line 1447 of <code>pngrutil.c</code>.</p>

                <p>The following sections detail how CRS processes this vulnerability through its automated detection and patching pipeline:</p>

                <h3>Step 1: Repository Setup</h3>
                <p>First, clone the CRS repository from the official source:</p>
<pre><code>git clone git@github.com:aixcc-finals/afc-crs-all-you-need-is-a-fuzzing-brain.git</code></pre>

                <h3>Step 2: Service Deployment</h3>
                <p>For this demonstration, we deploy all four CRS services locally. In production environments, these services can be distributed across multiple nodes for enhanced scalability and performance.</p>

                <h4>Task & Worker Service</h4>
                <p>In local testing mode, the Task Service and Worker Service can operate as a unified service:</p>
<pre><code>cd crs
LOCAL_TEST=1 go run cmd/server/main.go</code></pre>

                <p>Upon successful initialization, the service produces the following output:</p>
<pre><code>Logs will be saved to: logs/20250727/run.log
2025/07/27 18:22:30 Worker configuration: 24 nodes starting at port 9081
[GIN-debug] Listening and serving HTTP on :1324</code></pre>

                <h4>Submission Service</h4>
                <p>Launch the submission service for managing POV and patch submissions:</p>
<pre><code>cd competition-api
LOCAL_TEST=1 go run cmd/server/main.go</code></pre>

                <h4>Static Analysis Service</h4>
                <p>Initialize the static analysis service for code analysis and metadata extraction:</p>
<pre><code>cd static-analysis
go run cmd/server/main.go</code></pre>

                <h3>Send Task To CRS</h3>
                <p>Now we submit the libpng vulnerability detection task to CRS. For this demonstration, we'll perform a delta scan task to identify vulnerabilities introduced by a specific commit.</p>

                <h4>Task Metadata</h4>
                <p>The following metadata is required for task submission:</p>
                <ul>
                    <li><strong>Repository URL</strong>: The target project repository</li>
                    <li><strong>Base Reference</strong>: The code version before the target commit</li>
                    <li><strong>Head Reference</strong>: The new version after introducing the commit</li>
                    <li><strong>Fuzz Tooling Repository</strong>: The fuzzing infrastructure codebase</li>
                    <li><strong>Duration (Optional)</strong>: Time limit for analysis in seconds</li>
                </ul>

                <h4>Method 1: Using AIxCC Competition Infrastructure</h4>
                <p>If using the official AIxCC competition infrastructure, tasks can be submitted through the competition webhook:</p>
<pre><code>curl -X 'POST' 'http://localhost:1323/webhook/trigger_task' \
  -H 'Content-Type: application/json' \
  -d '{
    "challenge_repo_url": "git@github.com:aixcc-finals/example-libpng.git",
    "challenge_repo_head_ref": "fdacd5a1dcff42175117d674b0fda9f8a005ae88",
    "fuzz_tooling_url": "https://github.com/aixcc-finals/oss-fuzz-aixcc.git",
    "fuzz_tooling_ref": "d5fbd68fca66e6fa4f05899170d24e572b01853d",
    "fuzz_tooling_project_name": "libpng",
    "duration": 3600
  }'</code></pre>

                <h4>Method 2: Direct CRS API Submission</h4>
                <p>Users can also submit tasks directly to the CRS Task Service using the processed format:</p>
<pre><code>curl -s -X POST "http://localhost:1324/v1/task/" \
  -H "Content-Type: application/json" \
  --user "api_key_id:api_key_token" \
  -d '{
    "message_id": "0d2ab7cd-766c-49f2-86f6-926fbdb96546",
    "tasks": [{ "task_id": "...", "type": "delta", ... }]
  }'</code></pre>

                <h3>Task Processing</h3>
                <p>Upon successful submission, the CRS Task Service will:</p>
                <ol>
                    <li>Parse the task metadata and validate all required components</li>
                    <li>Download source materials from the provided URLs</li>
                    <li>Initialize workspace for the specific task</li>
                    <li>Construct appropriate fuzzers and sanitizers based on the project configuration</li>
                    <li>Distribute subtasks to available Worker Services for parallel processing</li>
                </ol>

                <p>CRS downloads the source materials and begins constructing the analysis environment within Docker containers:</p>
<pre><code>2025/07/27 19:52:07 Building fuzzers with --sanitizer=coverage
2025/07/27 19:52:07 Building fuzzers with --sanitizer=address
2025/07/27 19:52:07 Building fuzzers with --sanitizer=memory
2025/07/27 19:52:07 Created sanitizer-specific project directory: /crs-workdir/.../example-libpng-address</code></pre>

                <p>CRS successfully reproduces the dynamic stack buffer overflow vulnerability:</p>
<pre><code>2025/07/27 19:54:16 [basic xs0_delta.py stdout] Running: /out/x_d42d2c5a.bin
2025/07/27 19:54:16 [basic xs0_delta.py stdout] =================================================================
2025/07/27 19:54:16 [basic xs0_delta.py stdout] ==1==ERROR: AddressSanitizer: dynamic-stack-buffer-overflow
2025/07/27 19:54:16 [basic xs0_delta.py stdout] READ of size 2 at 0x7ffc49c40372 thread T0
2025/07/27 19:54:16 [basic xs0_delta.py stdout] Fuzzer crashed with exit code 1 - potential vulnerability triggered!</code></pre>

                <p>Then this POV will be formatted into a JSON file that will be used by the patching phase:</p>
<pre><code>{
  "conversation": "conversation_95629d9b_claude-3-7-sonnet-latest_1.json",
  "fuzzer_output": "fuzzer_output_95629d9b_claude-3-7-sonnet-latest_1.txt",
  "blob_file": "test_blob_95629d9b_claude-3-7-sonnet-latest_1.bin",
  "fuzzer_name": "libpng_read_fuzzer",
  "sanitizer": "address",
  "project_name": "libpng",
  "pov_signature": "libpng_read_fuzzer-OSS_FUZZ_png_handle_iCCP /src/libpng/pngrutil.c:1447"
}</code></pre>

                <p>Then CRS will try to patch this vulnerability. For each generated patch, CRS attempts to reproduce the vulnerability using the POV. If the reproduction fails, it indicates that the vulnerability has been mitigated.</p>

                <p>Once a suitable patch is found, the task is considered complete:</p>
<pre><code>2025/07/27 20:21:13 [Round 1][basic patch0_delta.py stdout] PATCH SUCCESS! Vulnerability patched on iteration 1
2025/07/27 20:21:13 [Round 1] Patch success detected for patch0_delta.py! Cancelling other strategies in this round.
2025/07/27 20:21:13 [Round 1] patch3_delta.py canceled early (context canceled)
2025/07/27 20:21:13 [Round 1] patch2_delta.py canceled early (context canceled)</code></pre>

                <p>At this point, we have successfully discovered a bug hidden in the libpng codebase and generated an effective patch to fix it.</p>

                <p>Of course, you can test with various OSS-Fuzz-based projects - you might find unexpected discoveries!</p>
            </main>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-text">
                    <p>Â© 2025 All You Need Is A Fuzzing Brain Research Team</p>
                    <p>Advancing autonomous vulnerability discovery through AI</p>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/all-you-need-is-a-fuzzing-brain"><img src="assets/images/fuzzbrain.jpg" alt="GitHub" class="footer-logo"> GitHub</a>
                    <a href="https://aicyberchallenge.com/">DARPA AIxCC</a>
                </div>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
